<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.chinasofti.cetp.study.dao.CoursewareMapper">
	<resultMap id="BaseResultMap"
		type="com.chinasofti.cetp.study.model.MoreCourseware">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jul 25 
			19:26:27 CST 2013. -->
		<id column="COURSE_ID" property="courseId" jdbcType="INTEGER" />
		<result column="COURSE_NAME" property="courseName" jdbcType="VARCHAR" />
		<result column="COURSE_STYLE" property="courseStyle" jdbcType="CHAR" />
		<result column="COURSE_VIDEO_TYPE" property="courseVideoType"
			jdbcType="CHAR" />
		<result column="COURSE_TYPE_ID" property="courseTypeId"
			jdbcType="INTEGER" />
		<result column="COURSE_LANG" property="courseLang" jdbcType="CHAR" />
		<result column="COURSE_SPEAKER" property="courseSpeaker"
			jdbcType="VARCHAR" />
		<result column="COURSE_URL" property="courseUrl" jdbcType="VARCHAR" />
		<result column="COURSE_DOC_URL" property="courseDocUrl"
			jdbcType="VARCHAR" />
		<result column="COURSE_PRICE" property="coursePrice" jdbcType="DOUBLE" />
		<result column="COURSE_TIME" property="courseTime" jdbcType="INTEGER" />
		<result column="COURSE_DIFF" property="courseDiff" jdbcType="CHAR" />
		<result column="COURSE_PARENT" property="courseParent"
			jdbcType="CHAR" />
		<result column="COURSE_KRYWORD" property="courseKryword"
			jdbcType="VARCHAR" />
		<result column="COURSE_LEVEL" property="courseLevel" jdbcType="CHAR" />
		<result column="COURSE_POINT" property="coursePoint" jdbcType="VARCHAR" />
		<result column="COURSE_MAJORS" property="courseMajors"
			jdbcType="VARCHAR" />
		<result column="COURSE_TARGET" property="courseTarget"
			jdbcType="VARCHAR" />
		<result column="COURSE_INTRO" property="courseIntro" jdbcType="VARCHAR" />
		<result column="COURSE_DEMAND" property="courseDemand"
			jdbcType="VARCHAR" />
		<result column="COURSE_REF_COURSE" property="courseRefCourse"
			jdbcType="VARCHAR" />
		<result column="COURSE_REF_DEMAND" property="courseRefDemand"
			jdbcType="VARCHAR" />
		<result column="COURSE_OBJECT" property="courseObject"
			jdbcType="VARCHAR" />
		<result column="COURSE_USER_NO" property="courseUserNo"
			jdbcType="INTEGER" />
		<result column="COURSEWARE_REGTIME" property="coursewareRegtime"
			jdbcType="TIMESTAMP" />
		<result column="TECH_TYPE_NAME" property="techTypeName"
			jdbcType="VARCHAR" />
	</resultMap>

	<!-- 查询章节课件 -->
	<select id="selectCourseWithChapter" resultMap="BaseResultMap"
		parameterType="java.lang.Integer">
		SELECT
		<include refid="Base_Column_List" />
		,type.TECH_TYPE_NAME from tp_courseware
		course ,tp_tech_type type WHERE
		course.COURSE_TYPE_ID =
		type.TECH_TYPE_ID AND
		course.COURSE_ID =(
		SELECT
		c.CHAP_COURSE_ID from
		tp_chapter c WHERE c.CHAP_ID=#{chapId})
	</select>

	<!-- 查询课件信息 -->
	<select id="selectCourseware" resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		,type.TECH_TYPE_NAME from tp_courseware course,tp_tech_type type where
		course.COURSE_TYPE_ID=type.TECH_TYPE_ID

	</select>

	<!-- 模糊查询 -->
	<select id="selectQureyCourseware" parameterType="HashMap"
		resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		,type.TECH_TYPE_NAME from tp_courseware
		course,tp_tech_type
		type where
		course.COURSE_TYPE_ID=type.TECH_TYPE_ID
		<if test="selectStyle !=null">
			and course.COURSE_VIDEO_TYPE = #{selectStyle}
		</if>
		<if test="selectMajor !=null">
			and course.COURSE_MAJORS like #{selectMajor}
		</if>
		<if test="selectLang !=null">
			and course.COURSE_LANG = #{selectLang}
		</if>
		<if test="selectSpeak != null">
			and course.COURSE_SPEAKER like #{selectSpeak}
		</if>
		<if test="selectKey != null">
			and course.COURSE_KRYWORD like #{selectKey}
		</if>
		<if test="selectTypeId != null">
			and course.COURSE_TYPE_ID=#{selectTypeId}
		</if>
	</select>

	<!-- end -->

	<sql id="Example_Where_Clause">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jul 25 
			19:26:27 CST 2013. -->
		<where>
			<foreach collection="oredCriteria" item="criteria" separator="or">
				<if test="criteria.valid">
					<trim prefix="(" suffix=")" prefixOverrides="and">
						<foreach collection="criteria.criteria" item="criterion">
							<choose>
								<when test="criterion.noValue">
									and ${criterion.condition}
								</when>
								<when test="criterion.singleValue">
									and ${criterion.condition} #{criterion.value}
								</when>
								<when test="criterion.betweenValue">
									and ${criterion.condition} #{criterion.value}
									and
									#{criterion.secondValue}
								</when>
								<when test="criterion.listValue">
									and ${criterion.condition}
									<foreach collection="criterion.value" item="listItem"
										open="(" close=")" separator=",">
										#{listItem}
									</foreach>
								</when>
							</choose>
						</foreach>
					</trim>
				</if>
			</foreach>
		</where>
	</sql>
	<sql id="Update_By_Example_Where_Clause">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jul 25 
			19:26:27 CST 2013. -->
		<where>
			<foreach collection="example.oredCriteria" item="criteria"
				separator="or">
				<if test="criteria.valid">
					<trim prefix="(" suffix=")" prefixOverrides="and">
						<foreach collection="criteria.criteria" item="criterion">
							<choose>
								<when test="criterion.noValue">
									and ${criterion.condition}
								</when>
								<when test="criterion.singleValue">
									and ${criterion.condition} #{criterion.value}
								</when>
								<when test="criterion.betweenValue">
									and ${criterion.condition} #{criterion.value}
									and
									#{criterion.secondValue}
								</when>
								<when test="criterion.listValue">
									and ${criterion.condition}
									<foreach collection="criterion.value" item="listItem"
										open="(" close=")" separator=",">
										#{listItem}
									</foreach>
								</when>
							</choose>
						</foreach>
					</trim>
				</if>
			</foreach>
		</where>
	</sql>
	<sql id="Base_Column_List">
		COURSE_ID, COURSE_NAME, COURSE_STYLE, COURSE_VIDEO_TYPE,
		COURSE_TYPE_ID, COURSE_LANG,
		COURSE_SPEAKER, COURSE_URL,
		COURSE_DOC_URL, COURSE_PRICE, COURSE_TIME, COURSE_DIFF,
		COURSE_PARENT,
		COURSE_KRYWORD, COURSE_LEVEL, COURSE_POINT,
		COURSE_MAJORS,
		COURSE_TARGET,
		COURSE_INTRO, COURSE_DEMAND, COURSE_REF_COURSE,
		COURSE_REF_DEMAND, COURSE_OBJECT,
		COURSE_USER_NO, COURSEWARE_REGTIME
	</sql>
	<select id="selectByExample" resultMap="BaseResultMap"
		parameterType="com.chinasofti.cetp.study.model.CoursewareExample">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jul 25 
			19:26:27 CST 2013. -->
		select
		<if test="distinct">
			distinct
		</if>
		<include refid="Base_Column_List" />
		from tp_courseware
		<if test="_parameter != null">
			<include refid="Example_Where_Clause" />
		</if>
		<if test="orderByClause != null">
			order by ${orderByClause}
		</if>
	</select>
	<select id="selectByPrimaryKey" resultMap="BaseResultMap"
		parameterType="java.lang.Integer">
		select
		<include refid="Base_Column_List" />
		,type.TECH_TYPE_NAME
		from tp_courseware
		course ,tp_tech_type type
		WHERE
		course.COURSE_TYPE_ID =
		type.TECH_TYPE_ID
		and COURSE_ID
		=#{courseId,jdbcType=INTEGER}
	</select>

	<!-- 查询已修普通课件 -->
	<select id="selectFinishCourseForStu" resultMap="BaseResultMap"
		parameterType="HashMap">
		SELECT
		<include refid="Base_Column_List" />
		FROM
		tp_courseware
		WHERE
		COURSE_ID IN (
		SELECT
		cs.CT_COURSE_ID
		FROM
		tp_course_stu cs
		WHERE
		cs.CT_STU_ID = #{stuNo}
		AND cs.CT_STATUS = "3"
		AND
		cs.CT_COURSE_ID NOT IN (
		SELECT
		b.CHAP_COURSE_ID
		FROM
		tp_chapter b
		WHERE
		b.CHAP_SPEC_ID IN (
		SELECT
		a.SU_SPEC_ID
		FROM
		tp_spec_stu a
		WHERE
		a.SU_STU_ID = #{stuNo}
		)AND b.CHAP_COURSE_ID IS NOT NULL
		)
		)
		<if test="courseName != null">
			AND COURSE_NAME LIKE #{courseName}
		</if>

	</select>
	<delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jul 25 
			19:26:27 CST 2013. -->
		delete from tp_courseware
		where COURSE_ID =
		#{courseId,jdbcType=INTEGER}
	</delete>
	<delete id="deleteByExample" parameterType="com.chinasofti.cetp.study.model.CoursewareExample">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jul 25 
			19:26:27 CST 2013. -->
		delete from tp_courseware
		<if test="_parameter != null">
			<include refid="Example_Where_Clause" />
		</if>
	</delete>
	<insert id="insert" parameterType="com.chinasofti.cetp.study.model.Courseware"
		useGeneratedKeys="true" keyProperty="courseId">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jul 25 
			19:26:27 CST 2013. -->
		insert into tp_courseware (COURSE_NAME, COURSE_STYLE,
		COURSE_VIDEO_TYPE, COURSE_TYPE_ID, COURSE_LANG,
		COURSE_SPEAKER,
		COURSE_URL, COURSE_DOC_URL,
		COURSE_PRICE, COURSE_TIME, COURSE_DIFF,
		COURSE_PARENT, COURSE_KRYWORD, COURSE_LEVEL,
		COURSE_POINT,
		COURSE_MAJORS, COURSE_TARGET,
		COURSE_INTRO, COURSE_DEMAND,
		COURSE_REF_COURSE,
		COURSE_REF_DEMAND, COURSE_OBJECT, COURSE_USER_NO,
		COURSEWARE_REGTIME)
		values (
		#{courseName,jdbcType=VARCHAR},
		#{courseStyle,jdbcType=CHAR},
		#{courseVideoType,jdbcType=CHAR},
		#{courseTypeId,jdbcType=INTEGER},
		#{courseLang,jdbcType=CHAR},
		#{courseSpeaker,jdbcType=VARCHAR},
		#{courseUrl,jdbcType=VARCHAR},
		#{courseDocUrl,jdbcType=VARCHAR},
		#{coursePrice,jdbcType=DOUBLE},
		#{courseTime,jdbcType=INTEGER},
		#{courseDiff,jdbcType=CHAR},
		#{courseParent,jdbcType=CHAR},
		#{courseKryword,jdbcType=VARCHAR},
		#{courseLevel,jdbcType=CHAR},
		#{coursePoint,jdbcType=VARCHAR},
		#{courseMajors,jdbcType=VARCHAR},
		#{courseTarget,jdbcType=VARCHAR},
		#{courseIntro,jdbcType=VARCHAR},
		#{courseDemand,jdbcType=VARCHAR},
		#{courseRefCourse,jdbcType=VARCHAR},
		#{courseRefDemand,jdbcType=VARCHAR}, #{courseObject,jdbcType=VARCHAR},
		#{courseUserNo,jdbcType=INTEGER},
		now())
	</insert>
	<insert id="insertSelective" parameterType="com.chinasofti.cetp.study.model.Courseware">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jul 25 
			19:26:27 CST 2013. -->
		insert into tp_courseware
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="courseId != null">
				COURSE_ID,
			</if>
			<if test="courseName != null">
				COURSE_NAME,
			</if>
			<if test="courseStyle != null">
				COURSE_STYLE,
			</if>
			<if test="courseVideoType != null">
				COURSE_VIDEO_TYPE,
			</if>
			<if test="courseTypeId != null">
				COURSE_TYPE_ID,
			</if>
			<if test="courseLang != null">
				COURSE_LANG,
			</if>
			<if test="courseSpeaker != null">
				COURSE_SPEAKER,
			</if>
			<if test="courseUrl != null">
				COURSE_URL,
			</if>
			<if test="courseDocUrl != null">
				COURSE_DOC_URL,
			</if>
			<if test="coursePrice != null">
				COURSE_PRICE,
			</if>
			<if test="courseTime != null">
				COURSE_TIME,
			</if>
			<if test="courseDiff != null">
				COURSE_DIFF,
			</if>
			<if test="courseParent != null">
				COURSE_PARENT,
			</if>
			<if test="courseKryword != null">
				COURSE_KRYWORD,
			</if>
			<if test="courseLevel != null">
				COURSE_LEVEL,
			</if>
			<if test="coursePoint != null">
				COURSE_POINT,
			</if>
			<if test="courseMajors != null">
				COURSE_MAJORS,
			</if>
			<if test="courseTarget != null">
				COURSE_TARGET,
			</if>
			<if test="courseIntro != null">
				COURSE_INTRO,
			</if>
			<if test="courseDemand != null">
				COURSE_DEMAND,
			</if>
			<if test="courseRefCourse != null">
				COURSE_REF_COURSE,
			</if>
			<if test="courseRefDemand != null">
				COURSE_REF_DEMAND,
			</if>
			<if test="courseObject != null">
				COURSE_OBJECT,
			</if>
			<if test="courseUserNo != null">
				COURSE_USER_NO,
			</if>
			<if test="coursewareRegtime != null">
				COURSEWARE_REGTIME,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="courseId != null">
				#{courseId,jdbcType=INTEGER},
			</if>
			<if test="courseName != null">
				#{courseName,jdbcType=VARCHAR},
			</if>
			<if test="courseStyle != null">
				#{courseStyle,jdbcType=CHAR},
			</if>
			<if test="courseVideoType != null">
				#{courseVideoType,jdbcType=CHAR},
			</if>
			<if test="courseTypeId != null">
				#{courseTypeId,jdbcType=INTEGER},
			</if>
			<if test="courseLang != null">
				#{courseLang,jdbcType=CHAR},
			</if>
			<if test="courseSpeaker != null">
				#{courseSpeaker,jdbcType=VARCHAR},
			</if>
			<if test="courseUrl != null">
				#{courseUrl,jdbcType=VARCHAR},
			</if>
			<if test="courseDocUrl != null">
				#{courseDocUrl,jdbcType=VARCHAR},
			</if>
			<if test="coursePrice != null">
				#{coursePrice,jdbcType=DOUBLE},
			</if>
			<if test="courseTime != null">
				#{courseTime,jdbcType=INTEGER},
			</if>
			<if test="courseDiff != null">
				#{courseDiff,jdbcType=CHAR},
			</if>
			<if test="courseParent != null">
				#{courseParent,jdbcType=CHAR},
			</if>
			<if test="courseKryword != null">
				#{courseKryword,jdbcType=VARCHAR},
			</if>
			<if test="courseLevel != null">
				#{courseLevel,jdbcType=CHAR},
			</if>
			<if test="coursePoint != null">
				#{coursePoint,jdbcType=VARCHAR},
			</if>
			<if test="courseMajors != null">
				#{courseMajors,jdbcType=VARCHAR},
			</if>
			<if test="courseTarget != null">
				#{courseTarget,jdbcType=VARCHAR},
			</if>
			<if test="courseIntro != null">
				#{courseIntro,jdbcType=VARCHAR},
			</if>
			<if test="courseDemand != null">
				#{courseDemand,jdbcType=VARCHAR},
			</if>
			<if test="courseRefCourse != null">
				#{courseRefCourse,jdbcType=VARCHAR},
			</if>
			<if test="courseRefDemand != null">
				#{courseRefDemand,jdbcType=VARCHAR},
			</if>
			<if test="courseObject != null">
				#{courseObject,jdbcType=VARCHAR},
			</if>
			<if test="courseUserNo != null">
				#{courseUserNo,jdbcType=INTEGER},
			</if>
			<if test="coursewareRegtime != null">
				#{coursewareRegtime,jdbcType=TIMESTAMP},
			</if>
		</trim>
	</insert>
	<select id="countByExample" parameterType="com.chinasofti.cetp.study.model.CoursewareExample"
		resultType="java.lang.Integer">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jul 25 
			19:26:27 CST 2013. -->
		select count(*) from tp_courseware
		<if test="_parameter != null">
			<include refid="Example_Where_Clause" />
		</if>
	</select>
	<update id="updateByExampleSelective" parameterType="map">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jul 25 
			19:26:27 CST 2013. -->
		update tp_courseware
		<set>
			<if test="record.courseId != null">
				COURSE_ID = #{record.courseId,jdbcType=INTEGER},
			</if>
			<if test="record.courseName != null">
				COURSE_NAME = #{record.courseName,jdbcType=VARCHAR},
			</if>
			<if test="record.courseStyle != null">
				COURSE_STYLE = #{record.courseStyle,jdbcType=CHAR},
			</if>
			<if test="record.courseVideoType != null">
				COURSE_VIDEO_TYPE =
				#{record.courseVideoType,jdbcType=CHAR},
			</if>
			<if test="record.courseTypeId != null">
				COURSE_TYPE_ID = #{record.courseTypeId,jdbcType=INTEGER},
			</if>
			<if test="record.courseLang != null">
				COURSE_LANG = #{record.courseLang,jdbcType=CHAR},
			</if>
			<if test="record.courseSpeaker != null">
				COURSE_SPEAKER =
				#{record.courseSpeaker,jdbcType=VARCHAR},
			</if>
			<if test="record.courseUrl != null">
				COURSE_URL = #{record.courseUrl,jdbcType=VARCHAR},
			</if>
			<if test="record.courseDocUrl != null">
				COURSE_DOC_URL = #{record.courseDocUrl,jdbcType=VARCHAR},
			</if>
			<if test="record.coursePrice != null">
				COURSE_PRICE = #{record.coursePrice,jdbcType=DOUBLE},
			</if>
			<if test="record.courseTime != null">
				COURSE_TIME = #{record.courseTime,jdbcType=INTEGER},
			</if>
			<if test="record.courseDiff != null">
				COURSE_DIFF = #{record.courseDiff,jdbcType=CHAR},
			</if>
			<if test="record.courseParent != null">
				COURSE_PARENT = #{record.courseParent,jdbcType=CHAR},
			</if>
			<if test="record.courseKryword != null">
				COURSE_KRYWORD =
				#{record.courseKryword,jdbcType=VARCHAR},
			</if>
			<if test="record.courseLevel != null">
				COURSE_LEVEL = #{record.courseLevel,jdbcType=CHAR},
			</if>
			<if test="record.coursePoint != null">
				COURSE_POINT = #{record.coursePoint,jdbcType=VARCHAR},
			</if>
			<if test="record.courseMajors != null">
				COURSE_MAJORS = #{record.courseMajors,jdbcType=VARCHAR},
			</if>
			<if test="record.courseTarget != null">
				COURSE_TARGET = #{record.courseTarget,jdbcType=VARCHAR},
			</if>
			<if test="record.courseIntro != null">
				COURSE_INTRO = #{record.courseIntro,jdbcType=VARCHAR},
			</if>
			<if test="record.courseDemand != null">
				COURSE_DEMAND = #{record.courseDemand,jdbcType=VARCHAR},
			</if>
			<if test="record.courseRefCourse != null">
				COURSE_REF_COURSE =
				#{record.courseRefCourse,jdbcType=VARCHAR},
			</if>
			<if test="record.courseRefDemand != null">
				COURSE_REF_DEMAND =
				#{record.courseRefDemand,jdbcType=VARCHAR},
			</if>
			<if test="record.courseObject != null">
				COURSE_OBJECT = #{record.courseObject,jdbcType=VARCHAR},
			</if>
			<if test="record.courseUserNo != null">
				COURSE_USER_NO = #{record.courseUserNo,jdbcType=INTEGER},
			</if>
			COURSEWARE_REGTIME =now(),
		</set>
		<if test="_parameter != null">
			<include refid="Update_By_Example_Where_Clause" />
		</if>
	</update>
	<update id="updateByExample" parameterType="map">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jul 25 
			19:26:27 CST 2013. -->
		update tp_courseware
		set COURSE_ID =
		#{record.courseId,jdbcType=INTEGER},
		COURSE_NAME =
		#{record.courseName,jdbcType=VARCHAR},
		COURSE_STYLE =
		#{record.courseStyle,jdbcType=CHAR},
		COURSE_VIDEO_TYPE =
		#{record.courseVideoType,jdbcType=CHAR},
		COURSE_TYPE_ID =
		#{record.courseTypeId,jdbcType=INTEGER},
		COURSE_LANG =
		#{record.courseLang,jdbcType=CHAR},
		COURSE_SPEAKER =
		#{record.courseSpeaker,jdbcType=VARCHAR},
		COURSE_URL =
		#{record.courseUrl,jdbcType=VARCHAR},
		COURSE_DOC_URL =
		#{record.courseDocUrl,jdbcType=VARCHAR},
		COURSE_PRICE =
		#{record.coursePrice,jdbcType=DOUBLE},
		COURSE_TIME =
		#{record.courseTime,jdbcType=INTEGER},
		COURSE_DIFF =
		#{record.courseDiff,jdbcType=CHAR},
		COURSE_PARENT =
		#{record.courseParent,jdbcType=CHAR},
		COURSE_KRYWORD =
		#{record.courseKryword,jdbcType=VARCHAR},
		COURSE_LEVEL =
		#{record.courseLevel,jdbcType=CHAR},
		COURSE_POINT =
		#{record.coursePoint,jdbcType=VARCHAR},
		COURSE_MAJORS =
		#{record.courseMajors,jdbcType=VARCHAR},
		COURSE_TARGET =
		#{record.courseTarget,jdbcType=VARCHAR},
		COURSE_INTRO =
		#{record.courseIntro,jdbcType=VARCHAR},
		COURSE_DEMAND =
		#{record.courseDemand,jdbcType=VARCHAR},
		COURSE_REF_COURSE =
		#{record.courseRefCourse,jdbcType=VARCHAR},
		COURSE_REF_DEMAND =
		#{record.courseRefDemand,jdbcType=VARCHAR},
		COURSE_OBJECT =
		#{record.courseObject,jdbcType=VARCHAR},
		COURSE_USER_NO =
		#{record.courseUserNo,jdbcType=INTEGER},
		COURSEWARE_REGTIME =
		#{record.coursewareRegtime,jdbcType=TIMESTAMP}
		<if test="_parameter != null">
			<include refid="Update_By_Example_Where_Clause" />
		</if>
	</update>
	<update id="updateByPrimaryKeySelective" parameterType="com.chinasofti.cetp.study.model.Courseware">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jul 25 
			19:26:27 CST 2013. -->
		update tp_courseware
		<set>
			<if test="courseName != null">
				COURSE_NAME = #{courseName,jdbcType=VARCHAR},
			</if>
			<if test="courseStyle != null">
				COURSE_STYLE = #{courseStyle,jdbcType=CHAR},
			</if>
			<if test="courseVideoType != null">
				COURSE_VIDEO_TYPE = #{courseVideoType,jdbcType=CHAR},
			</if>
			<if test="courseTypeId != null">
				COURSE_TYPE_ID = #{courseTypeId,jdbcType=INTEGER},
			</if>
			<if test="courseLang != null">
				COURSE_LANG = #{courseLang,jdbcType=CHAR},
			</if>
			<if test="courseSpeaker != null">
				COURSE_SPEAKER = #{courseSpeaker,jdbcType=VARCHAR},
			</if>
			<if test="courseUrl != null">
				COURSE_URL = #{courseUrl,jdbcType=VARCHAR},
			</if>
			<if test="courseDocUrl != null">
				COURSE_DOC_URL = #{courseDocUrl,jdbcType=VARCHAR},
			</if>
			<if test="coursePrice != null">
				COURSE_PRICE = #{coursePrice,jdbcType=DOUBLE},
			</if>
			<if test="courseTime != null">
				COURSE_TIME = #{courseTime,jdbcType=INTEGER},
			</if>
			<if test="courseDiff != null">
				COURSE_DIFF = #{courseDiff,jdbcType=CHAR},
			</if>
			<if test="courseParent != null">
				COURSE_PARENT = #{courseParent,jdbcType=CHAR},
			</if>
			<if test="courseKryword != null">
				COURSE_KRYWORD = #{courseKryword,jdbcType=VARCHAR},
			</if>
			<if test="courseLevel != null">
				COURSE_LEVEL = #{courseLevel,jdbcType=CHAR},
			</if>
			<if test="coursePoint != null">
				COURSE_POINT = #{coursePoint,jdbcType=VARCHAR},
			</if>
			<if test="courseMajors != null">
				COURSE_MAJORS = #{courseMajors,jdbcType=VARCHAR},
			</if>
			<if test="courseTarget != null">
				COURSE_TARGET = #{courseTarget,jdbcType=VARCHAR},
			</if>
			<if test="courseIntro != null">
				COURSE_INTRO = #{courseIntro,jdbcType=VARCHAR},
			</if>
			<if test="courseDemand != null">
				COURSE_DEMAND = #{courseDemand,jdbcType=VARCHAR},
			</if>
			<if test="courseRefCourse != null">
				COURSE_REF_COURSE = #{courseRefCourse,jdbcType=VARCHAR},
			</if>
			<if test="courseRefDemand != null">
				COURSE_REF_DEMAND = #{courseRefDemand,jdbcType=VARCHAR},
			</if>
			<if test="courseObject != null">
				COURSE_OBJECT = #{courseObject,jdbcType=VARCHAR},
			</if>
			<if test="courseUserNo != null">
				COURSE_USER_NO = #{courseUserNo,jdbcType=INTEGER},
			</if>
			COURSEWARE_REGTIME =now(),
		</set>
		where COURSE_ID = #{courseId,jdbcType=INTEGER}
	</update>
	<update id="updateByPrimaryKey" parameterType="com.chinasofti.cetp.study.model.Courseware">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jul 25 
			19:26:27 CST 2013. -->
		update tp_courseware
		set COURSE_NAME = #{courseName,jdbcType=VARCHAR},
		COURSE_STYLE = #{courseStyle,jdbcType=CHAR},
		COURSE_VIDEO_TYPE =
		#{courseVideoType,jdbcType=CHAR},
		COURSE_TYPE_ID =
		#{courseTypeId,jdbcType=INTEGER},
		COURSE_LANG =
		#{courseLang,jdbcType=CHAR},
		COURSE_SPEAKER =
		#{courseSpeaker,jdbcType=VARCHAR},
		COURSE_URL =
		#{courseUrl,jdbcType=VARCHAR},
		COURSE_DOC_URL =
		#{courseDocUrl,jdbcType=VARCHAR},
		COURSE_PRICE =
		#{coursePrice,jdbcType=DOUBLE},
		COURSE_TIME =
		#{courseTime,jdbcType=INTEGER},
		COURSE_DIFF =
		#{courseDiff,jdbcType=CHAR},
		COURSE_PARENT =
		#{courseParent,jdbcType=CHAR},
		COURSE_KRYWORD =
		#{courseKryword,jdbcType=VARCHAR},
		COURSE_LEVEL =
		#{courseLevel,jdbcType=CHAR},
		COURSE_POINT =
		#{coursePoint,jdbcType=VARCHAR},
		COURSE_MAJORS =
		#{courseMajors,jdbcType=VARCHAR},
		COURSE_TARGET =
		#{courseTarget,jdbcType=VARCHAR},
		COURSE_INTRO =
		#{courseIntro,jdbcType=VARCHAR},
		COURSE_DEMAND =
		#{courseDemand,jdbcType=VARCHAR},
		COURSE_REF_COURSE =
		#{courseRefCourse,jdbcType=VARCHAR},
		COURSE_REF_DEMAND =
		#{courseRefDemand,jdbcType=VARCHAR},
		COURSE_OBJECT =
		#{courseObject,jdbcType=VARCHAR},
		COURSE_USER_NO =
		#{courseUserNo,jdbcType=INTEGER},
		COURSEWARE_REGTIME =
		#{coursewareRegtime,jdbcType=TIMESTAMP}
		where COURSE_ID =
		#{courseId,jdbcType=INTEGER}
	</update>

	<!-- 选课控制 -->
	<select id="getCheckedCourseByStuNo" parameterType="java.lang.Integer"
		resultMap="BaseResultMap">
		SELECT
		couw.COURSE_ID
		,couw.COURSE_NAME
		,couw.COURSE_VIDEO_TYPE
		,couw.COURSE_LANG
		,couw.COURSE_TIME
		FROM
		tp_course_stu cstu
		,tp_courseware couw
		WHERE
		cstu.CT_COURSE_ID=couw.COURSE_ID AND
		cstu.CT_STU_ID=#{stuNo}
		AND
		cstu.CT_STATUS != "3"

	</select>
	<!-- <select id="getCheckedCourseByInfo" parameterType="HashMap" resultMap="BaseResultMap"> 
		SELECT <include refid="Base_Column_List" /> FROM tp_courseware WHERE COURSE_ID 
		in( SELECT cs.CT_COURSE_ID FROM tp_course_stu cs WHERE cs.CT_STU_ID = #{stuNo} 
		and cs.CT_STATUS !="3") <if test="courseName != null"> AND COURSE_NAME LIKE 
		#{courseName} </if> </select> -->
	<select id="getCheckedCourseByInfo" parameterType="HashMap"
		resultMap="BaseResultMap">
		SELECT
		<include refid="Base_Column_List" />
		FROM
		tp_courseware
		WHERE
		COURSE_ID IN (
		SELECT
		cs.CT_COURSE_ID
		FROM
		tp_course_stu cs
		WHERE
		cs.CT_STU_ID = #{stuNo}
		AND cs.CT_STATUS != "3"
		AND cs.CT_COURSE_ID NOT IN (
		SELECT
		b.CHAP_COURSE_ID
		FROM
		tp_chapter b
		WHERE
		b.CHAP_SPEC_ID IN (
		SELECT
		a.SU_SPEC_ID
		FROM
		tp_spec_stu a
		WHERE
		a.SU_STU_ID = #{stuNo}
		)AND b.CHAP_COURSE_ID IS NOT NULL
		)
		)
		<if test="courseName != null">
			AND COURSE_NAME LIKE #{courseName}
		</if>

	</select>

	<select id="selectSelByPrimaryKey" resultMap="BaseResultMap"
		parameterType="java.lang.Integer">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jul 25 
			19:26:27 CST 2013. COURSE_ID,COURSE_NAME,COURSE_TIME,COURSE_LANG,COURSE_VIDEO_TYPE -->
		select
		<include refid="Base_Column_List" />
		<!--<include refid="Base_Column_List" /> -->
		from tp_courseware
		where COURSE_ID = #{courseId,jdbcType=INTEGER}
	</select>

	<!-- 查询课件信息 -->
	<select id="selectSelCoursewareByStuNo" resultMap="BaseResultMap"
		parameterType="java.lang.Integer">
		select
		<include refid="Base_Column_List" />
		,type.TECH_TYPE_NAME from tp_courseware
		course,tp_tech_type type where
		course.COURSE_TYPE_ID=type.TECH_TYPE_ID
		and course.COURSE_ID not
		in(SELECT CT_COURSE_ID FROM tp_course_stu
		WHERE CT_STU_ID=#{stuNo})

	</select>
	<!-- 模糊查询 -->
	<select id="selectSelCoursewareByInfo" parameterType="HashMap"
		resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		,type.TECH_TYPE_NAME from tp_courseware
		course,tp_tech_type
		type where
		course.COURSE_TYPE_ID=type.TECH_TYPE_ID
		and course.COURSE_ID not
		in(SELECT CT_COURSE_ID FROM tp_course_stu WHERE
		tp_course_stu.CT_STU_ID = #{stuNo} )
		<if test="selectStyle !=null">
			and course.COURSE_VIDEO_TYPE like #{selectStyle}
		</if>
		<!-- <if test="selectMajor !=null"> and course.COURSE_MAJORS like #{selectMajor} 
			</if> <if test="selectLang !=null"> and course.COURSE_LANG like #{selectLang} 
			</if> <if test="selectSpeak != null"> and course.COURSE_SPEAKER like #{selectSpeak} 
			</if> <if test="selectKey != null"> and course.COURSE_KRYWORD like #{selectKey} 
			</if> -->
		<if test="selectTypeId != null">
			and course.COURSE_TYPE_ID=#{selectTypeId}
		</if>
	</select>
</mapper>